import { IngestionJob } from "@/types/platform";

export const ingestionJobs: IngestionJob[] = [
  // 1. IPEDS data scrape for SUNY Buffalo
  {
    id: "ingest-001",
    source_type: "url",
    source_url: "https://nces.ed.gov/ipeds/datacenter/InstitutionByName.aspx?goToReportId=1&sid=196088",
    source_name: "IPEDS Data Center - SUNY Buffalo",
    status: "completed",
    entity_id: "inst-001",
    entity_name: "State University of New York at Buffalo",
    fiscal_year: 2024,
    created_by: "user-001",
    created_at: "2024-08-12T09:00:00Z",
    started_at: "2024-08-12T09:00:15Z",
    completed_at: "2024-08-12T09:04:32Z",
    metrics_extracted: 12,
    metrics_validated: 12,
    pipeline_steps: [
      {
        step_name: "crawl",
        status: "completed",
        started_at: "2024-08-12T09:00:15Z",
        completed_at: "2024-08-12T09:01:05Z",
        duration_ms: 50000,
        output_summary: "Successfully crawled 3 pages from IPEDS Data Center",
      },
      {
        step_name: "convert_to_markdown",
        status: "completed",
        started_at: "2024-08-12T09:01:05Z",
        completed_at: "2024-08-12T09:01:48Z",
        duration_ms: 43000,
        output_summary: "Converted 3 HTML pages to structured markdown with 8 tables detected",
      },
      {
        step_name: "extract_metrics",
        status: "completed",
        started_at: "2024-08-12T09:01:48Z",
        completed_at: "2024-08-12T09:03:12Z",
        duration_ms: 84000,
        output_summary: "Extracted 12 metrics: enrollment, graduation rates, financial aid, tuition",
      },
      {
        step_name: "validate",
        status: "completed",
        started_at: "2024-08-12T09:03:12Z",
        completed_at: "2024-08-12T09:04:32Z",
        duration_ms: 80000,
        output_summary: "12 of 12 metrics passed validation checks",
      },
    ],
  },

  // 2. Annual Financial Report PDF upload for SUNY Buffalo
  {
    id: "ingest-002",
    source_type: "document_upload",
    source_document_id: "doc-001",
    source_name: "Annual Financial Report FY2024.pdf",
    status: "completed",
    entity_id: "inst-001",
    entity_name: "State University of New York at Buffalo",
    fiscal_year: 2024,
    created_by: "user-001",
    created_at: "2024-09-15T10:30:00Z",
    started_at: "2024-09-15T10:30:12Z",
    completed_at: "2024-09-15T10:35:47Z",
    metrics_extracted: 8,
    metrics_validated: 8,
    pipeline_steps: [
      {
        step_name: "parse_document",
        status: "completed",
        started_at: "2024-09-15T10:30:12Z",
        completed_at: "2024-09-15T10:32:05Z",
        duration_ms: 113000,
        output_summary: "Parsed 42-page PDF; extracted 15 tables and 6 charts",
      },
      {
        step_name: "extract_metrics",
        status: "completed",
        started_at: "2024-09-15T10:32:05Z",
        completed_at: "2024-09-15T10:34:18Z",
        duration_ms: 133000,
        output_summary: "Extracted 8 financial metrics: total revenue, tuition revenue, state appropriations, endowment value, operating expenses, research expenditures, auxiliary revenue, debt service",
      },
      {
        step_name: "validate",
        status: "completed",
        started_at: "2024-09-15T10:34:18Z",
        completed_at: "2024-09-15T10:35:47Z",
        duration_ms: 89000,
        output_summary: "8 of 8 metrics passed validation; cross-checked against prior year values",
      },
    ],
  },

  // 3. CDS web scrape for UT Austin
  {
    id: "ingest-003",
    source_type: "url",
    source_url: "https://reports.utexas.edu/common-data-set",
    source_name: "Common Data Set - UT Austin",
    status: "completed",
    entity_id: "inst-002",
    entity_name: "University of Texas at Austin",
    fiscal_year: 2024,
    created_by: "user-002",
    created_at: "2024-09-01T08:15:00Z",
    started_at: "2024-09-01T08:15:22Z",
    completed_at: "2024-09-01T08:22:10Z",
    metrics_extracted: 15,
    metrics_validated: 15,
    pipeline_steps: [
      {
        step_name: "crawl",
        status: "completed",
        started_at: "2024-09-01T08:15:22Z",
        completed_at: "2024-09-01T08:16:45Z",
        duration_ms: 83000,
        output_summary: "Crawled 5 CDS section pages (A through E)",
      },
      {
        step_name: "convert_to_markdown",
        status: "completed",
        started_at: "2024-09-01T08:16:45Z",
        completed_at: "2024-09-01T08:17:58Z",
        duration_ms: 73000,
        output_summary: "Converted 5 HTML pages to markdown; 22 tables identified",
      },
      {
        step_name: "extract_metrics",
        status: "completed",
        started_at: "2024-09-01T08:17:58Z",
        completed_at: "2024-09-01T08:20:30Z",
        duration_ms: 152000,
        output_summary: "Extracted 15 metrics: admissions, enrollment, graduation rates, financial aid, class size distributions",
      },
      {
        step_name: "validate",
        status: "completed",
        started_at: "2024-09-01T08:20:30Z",
        completed_at: "2024-09-01T08:22:10Z",
        duration_ms: 100000,
        output_summary: "15 of 15 metrics passed validation; 2 warnings on year-over-year variance in acceptance rate",
      },
    ],
  },

  // 4. Research Expenditure PDF for UC Berkeley
  {
    id: "ingest-004",
    source_type: "document_upload",
    source_document_id: "doc-009",
    source_name: "Research Expenditures FY2023.pdf",
    status: "completed",
    entity_id: "inst-004",
    entity_name: "University of California, Berkeley",
    fiscal_year: 2023,
    created_by: "user-001",
    created_at: "2024-08-20T14:00:00Z",
    started_at: "2024-08-20T14:00:08Z",
    completed_at: "2024-08-20T14:03:55Z",
    metrics_extracted: 5,
    metrics_validated: 5,
    pipeline_steps: [
      {
        step_name: "parse_document",
        status: "completed",
        started_at: "2024-08-20T14:00:08Z",
        completed_at: "2024-08-20T14:01:30Z",
        duration_ms: 82000,
        output_summary: "Parsed 18-page PDF; extracted 6 tables focused on R&D expenditure by field",
      },
      {
        step_name: "extract_metrics",
        status: "completed",
        started_at: "2024-08-20T14:01:30Z",
        completed_at: "2024-08-20T14:03:02Z",
        duration_ms: 92000,
        output_summary: "Extracted 5 research metrics: total R&D, federal R&D, non-federal R&D, STEM R&D share, research staff FTE",
      },
      {
        step_name: "validate",
        status: "completed",
        started_at: "2024-08-20T14:03:02Z",
        completed_at: "2024-08-20T14:03:55Z",
        duration_ms: 53000,
        output_summary: "5 of 5 metrics passed validation; values consistent with NSF HERD historical trends",
      },
    ],
  },

  // 5. IPEDS bulk scrape for Ohio State (still running)
  {
    id: "ingest-005",
    source_type: "url",
    source_url: "https://nces.ed.gov/ipeds/datacenter/InstitutionByName.aspx?goToReportId=1&sid=204796",
    source_name: "IPEDS Data Center - Ohio State",
    status: "extracting",
    entity_id: "inst-005",
    entity_name: "Ohio State University",
    fiscal_year: 2024,
    created_by: "user-002",
    created_at: "2024-09-18T11:30:00Z",
    started_at: "2024-09-18T11:30:10Z",
    metrics_extracted: 0,
    metrics_validated: 0,
    pipeline_steps: [
      {
        step_name: "crawl",
        status: "completed",
        started_at: "2024-09-18T11:30:10Z",
        completed_at: "2024-09-18T11:31:25Z",
        duration_ms: 75000,
        output_summary: "Crawled 4 pages from IPEDS Data Center for Ohio State",
      },
      {
        step_name: "convert_to_markdown",
        status: "completed",
        started_at: "2024-09-18T11:31:25Z",
        completed_at: "2024-09-18T11:32:40Z",
        duration_ms: 75000,
        output_summary: "Converted 4 HTML pages to markdown; 10 tables detected",
      },
      {
        step_name: "extract_metrics",
        status: "running",
        started_at: "2024-09-18T11:32:40Z",
        output_summary: "Processing table 6 of 10...",
      },
      {
        step_name: "validate",
        status: "pending",
      },
    ],
  },

  // 6. Board Presentation PPTX upload for U of Michigan
  {
    id: "ingest-006",
    source_type: "document_upload",
    source_document_id: "doc-010",
    source_name: "Board Presentation FY2024 Overview.pptx",
    status: "completed",
    entity_id: "inst-003",
    entity_name: "University of Michigan - Ann Arbor",
    fiscal_year: 2024,
    created_by: "user-001",
    created_at: "2024-09-05T16:00:00Z",
    started_at: "2024-09-05T16:00:20Z",
    completed_at: "2024-09-05T16:04:15Z",
    metrics_extracted: 4,
    metrics_validated: 4,
    pipeline_steps: [
      {
        step_name: "parse_document",
        status: "completed",
        started_at: "2024-09-05T16:00:20Z",
        completed_at: "2024-09-05T16:01:55Z",
        duration_ms: 95000,
        output_summary: "Parsed 28-slide PPTX; identified 4 data-bearing slides with charts and tables",
      },
      {
        step_name: "extract_metrics",
        status: "completed",
        started_at: "2024-09-05T16:01:55Z",
        completed_at: "2024-09-05T16:03:30Z",
        duration_ms: 95000,
        output_summary: "Extracted 4 metrics: total enrollment, retention rate, 6-year graduation rate, student-faculty ratio",
      },
      {
        step_name: "validate",
        status: "completed",
        started_at: "2024-09-05T16:03:30Z",
        completed_at: "2024-09-05T16:04:15Z",
        duration_ms: 45000,
        output_summary: "4 of 4 metrics passed validation",
      },
    ],
  },

  // 7. NACUBO Endowment URL scrape (failed)
  {
    id: "ingest-007",
    source_type: "url",
    source_url: "https://www.nacubo.org/Research/2024/NACUBO-Endowment-Study",
    source_name: "NACUBO Endowment Study 2024",
    status: "failed",
    entity_id: undefined,
    entity_name: undefined,
    fiscal_year: 2024,
    created_by: "user-001",
    created_at: "2024-09-10T07:00:00Z",
    started_at: "2024-09-10T07:00:08Z",
    completed_at: "2024-09-10T07:02:15Z",
    error_message: "Page structure changed, unable to parse tables",
    metrics_extracted: 0,
    metrics_validated: 0,
    pipeline_steps: [
      {
        step_name: "crawl",
        status: "completed",
        started_at: "2024-09-10T07:00:08Z",
        completed_at: "2024-09-10T07:01:02Z",
        duration_ms: 54000,
        output_summary: "Crawled 1 page from NACUBO endowment study portal",
      },
      {
        step_name: "convert_to_markdown",
        status: "failed",
        started_at: "2024-09-10T07:01:02Z",
        completed_at: "2024-09-10T07:02:15Z",
        duration_ms: 73000,
        error: "Page structure changed, unable to parse tables",
        output_summary: "Failed: the expected table layout was not found; NACUBO appears to have restructured their results page",
      },
      {
        step_name: "extract_metrics",
        status: "skipped",
      },
      {
        step_name: "validate",
        status: "skipped",
      },
    ],
  },

  // 8. Enrollment report Excel upload for UVA
  {
    id: "ingest-008",
    source_type: "document_upload",
    source_document_id: "doc-011",
    source_name: "Enrollment Report Fall 2024.xlsx",
    status: "completed",
    entity_id: "inst-006",
    entity_name: "University of Virginia",
    fiscal_year: 2024,
    created_by: "user-002",
    created_at: "2024-09-12T13:45:00Z",
    started_at: "2024-09-12T13:45:10Z",
    completed_at: "2024-09-12T13:48:22Z",
    metrics_extracted: 6,
    metrics_validated: 6,
    pipeline_steps: [
      {
        step_name: "parse_document",
        status: "completed",
        started_at: "2024-09-12T13:45:10Z",
        completed_at: "2024-09-12T13:46:05Z",
        duration_ms: 55000,
        output_summary: "Parsed Excel workbook with 3 sheets: Summary, Undergraduate, Graduate",
      },
      {
        step_name: "extract_metrics",
        status: "completed",
        started_at: "2024-09-12T13:46:05Z",
        completed_at: "2024-09-12T13:47:30Z",
        duration_ms: 85000,
        output_summary: "Extracted 6 enrollment metrics: total enrollment, undergraduate enrollment, graduate enrollment, first-time freshmen, international students, in-state percentage",
      },
      {
        step_name: "validate",
        status: "completed",
        started_at: "2024-09-12T13:47:30Z",
        completed_at: "2024-09-12T13:48:22Z",
        duration_ms: 52000,
        output_summary: "6 of 6 metrics passed validation; total enrollment consistent with sum of undergraduate + graduate",
      },
    ],
  },

  // 9. US News rankings scrape (paused)
  {
    id: "ingest-009",
    source_type: "url",
    source_url: "https://www.usnews.com/best-colleges/rankings/national-universities",
    source_name: "US News Best Colleges Rankings 2024",
    status: "paused",
    entity_id: undefined,
    entity_name: undefined,
    fiscal_year: 2024,
    created_by: "user-001",
    created_at: "2024-09-08T06:00:00Z",
    started_at: "2024-09-08T06:00:12Z",
    metrics_extracted: 0,
    metrics_validated: 0,
    pipeline_steps: [
      {
        step_name: "crawl",
        status: "completed",
        started_at: "2024-09-08T06:00:12Z",
        completed_at: "2024-09-08T06:01:40Z",
        duration_ms: 88000,
        output_summary: "Crawled rankings page; detected paywall on detailed metrics pages",
      },
      {
        step_name: "convert_to_markdown",
        status: "pending",
      },
      {
        step_name: "extract_metrics",
        status: "pending",
      },
      {
        step_name: "validate",
        status: "pending",
      },
    ],
  },

  // 10. Manual data entry for Penn State
  {
    id: "ingest-010",
    source_type: "manual_entry",
    source_name: "Manual Data Entry - Penn State Key Metrics",
    status: "completed",
    entity_id: "inst-010",
    entity_name: "Pennsylvania State University",
    fiscal_year: 2023,
    created_by: "user-002",
    created_at: "2024-08-28T15:30:00Z",
    started_at: "2024-08-28T15:30:05Z",
    completed_at: "2024-08-28T15:32:10Z",
    metrics_extracted: 3,
    metrics_validated: 3,
    pipeline_steps: [
      {
        step_name: "validate",
        status: "completed",
        started_at: "2024-08-28T15:30:05Z",
        completed_at: "2024-08-28T15:31:20Z",
        duration_ms: 75000,
        output_summary: "Validated 3 manually entered metrics: total enrollment, endowment market value, annual giving total",
      },
      {
        step_name: "store",
        status: "completed",
        started_at: "2024-08-28T15:31:20Z",
        completed_at: "2024-08-28T15:32:10Z",
        duration_ms: 50000,
        output_summary: "Stored 3 validated metric observations for Penn State FY2023",
      },
    ],
  },
];

// Helper: filter ingestion jobs by status
export const getIngestionJobsByStatus = (status: string): IngestionJob[] =>
  ingestionJobs.filter((job) => job.status === status);

// Helper: filter ingestion jobs by entity
export const getIngestionJobsByEntity = (entityId: string): IngestionJob[] =>
  ingestionJobs.filter((job) => job.entity_id === entityId);
